async function LeerApi(e){const t=await fetch(e),o=await t.json();JSON.stringify(o);return o}async function enviarDatosApi(e,t,o="POST"){console.log(e,t,o);try{const a=await fetch(e,{method:o,headers:{"Content-Type":"application/json"},body:t});console.log(a);const n=await a.json();return console.log(n),n}catch(e){console.log(e)}}function graficoFiltro(){const e=document.getElementById("chart_div2"),t=document.getElementById("fecha_inicio"),o=document.getElementById("tipo"),a=document.getElementById("fecha_final");if(console.log(validarDatos(t,a)),validarDatos(t,a)){var n={fecha_inicial:""+t.value,fecha_final:""+a.value,id:""+o.value};enviarDatosApi("http://localhost:3000/solicitudesDate",JSON.stringify(n)).then(t=>{console.log(t);if(0!=t.solicitudes.length){const o=[["Fecha","Cantidad"]];return e.classList.add("chart"),e.scrollIntoView({behavior:"smooth",block:"start"}),t.solicitudes.forEach(e=>{var t=new Date(e.fecha).toLocaleDateString("es-ES");o.push([t,e.cantidad])}),console.log(o),google.charts.load("current",{packages:["corechart"]}),void google.charts.setOnLoadCallback((function(){const t=google.visualization.arrayToDataTable(o),a={title:"Solicitudes de tipo  desde hasta ",hAxis:{title:"Fechas",titleTextStyle:{color:"#333"}},backgroundColor:"#f3f4f6",vAxis:{minValue:0,format:"0"}};new google.visualization.ColumnChart(e).draw(t,a)}))}e.classList.remove("chart"),mostrarAlertaBefore("No se econtraron datos","error",document.querySelector(".formulario"))})}}function validarDatos(e,t){const o=new Date(e.value),a=new Date(t.value);return console.log(o),"Invalid Date"==a||"Invalid Date"==o||""==a||""==o?(mostrarAlertaBefore("Las fechas no pueden estar vacias","error",document.querySelector(".formulario")),!1):!(a<o)||(mostrarAlertaBefore("La fecha desde no puede ser mayor que la fecha hasta","error",document.querySelector(".formulario")),!1)}function mostrarAlertaAfter(e,t,o){const a=document.querySelector(".alerta");a&&a.remove();const n=document.createElement("DIV");console.log(n),n.classList.add("alerta",t),n.textContent=e,o.parentElement.insertBefore(n,o.nextElementSibling),setTimeout(()=>{n.remove()},5e3)}function mostrarAlertaBefore(e,t,o){const a=document.querySelector(".alerta");a&&a.remove();const n=document.createElement("DIV");n.classList.add("alerta",t),n.textContent=e,o.parentElement.insertBefore(n,o),setTimeout(()=>{n.remove()},5e3)}google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback((function(){LeerApi("http://localhost:3000/solicitudesAll").then(e=>{console.log(e.solicitudes);const t=[["Solicitudes","Cantidad"]];e.solicitudes.forEach(e=>{t.push([e.tipo,e.cantidad])});const o=google.visualization.arrayToDataTable(t);new google.visualization.PieChart(document.getElementById("chart_div")).draw(o,{title:"Solicitudes General",is3D:!0,fontSize:16,backgroundColor:"#f3f4f6",padding:"0"})})}));