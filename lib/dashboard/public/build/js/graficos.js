async function LeerApi(e){const t=await fetch(e),o=await t.json();JSON.stringify(o);return o}async function enviarDatosApi(e,t,o="POST"){console.log(e,t,o);try{const a=await fetch(e,{method:o,headers:{"Content-Type":"application/json"},body:t});console.log(a);const n=await a.json();return console.log(n),n}catch(e){console.log(e)}}function graficoFiltro(){const e=document.getElementById("fecha_inicio"),t=document.getElementById("tipo"),o=document.getElementById("fecha_final");if(validarDatos(e,o)){var a={fecha_inicial:""+e.value,fecha_final:""+o.value,id:""+t.value};enviarDatosApi("http://localhost:3000/solicitudesDate",JSON.stringify(a)).then(e=>{console.log(e);const t=[["Fecha","Cantidad"]];e.solicitudes.forEach(e=>{var o=new Date(e.fecha).toLocaleDateString("es-ES");t.push([o,e.cantidad])}),console.log(t),google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback((function(){const e=google.visualization.arrayToDataTable(t),o={title:"Solicitudes de tipo  desde hasta ",hAxis:{title:"Fecha",titleTextStyle:{color:"#333"}},backgroundColor:"#f3f4f6",vAxis:{minValue:0}};new google.visualization.ColumnChart(document.getElementById("chart_div2")).draw(e,o)}))})}}function validarDatos(e,t){const o=new Date(e.value),a=new Date(t.value);return console.log(o<a),a<o?(mostrarAlertaAfter("La fecha desde no puede ser mayor que la fecha hasta","error",document.querySelector(".formulario")),!1):(""==a&""==o&&mostrarAlertaAfter("Las fechas no pueden estar vacias","error",document.querySelector(".formulario")),!0)}function mostrarAlertaAfter(e,t,o){const a=document.querySelector(".alerta");a&&a.remove();const n=document.createElement("DIV");n.classList.add("alerta",t),n.textContent=e,o.parentElement.insertBefore(n,o.nextElementSibling),setTimeout(()=>{n.remove()},5e3)}google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback((function(){LeerApi("http://localhost:3000/solicitudesAll").then(e=>{console.log(e.solicitudes);const t=[["Solicitudes","Cantidad"]];e.solicitudes.forEach(e=>{t.push([e.tipo,e.cantidad])});const o=google.visualization.arrayToDataTable(t);new google.visualization.PieChart(document.getElementById("chart_div")).draw(o,{title:"Solicitudes General",is3D:!0,fontSize:16,backgroundColor:"#f3f4f6",padding:"0"})})}));